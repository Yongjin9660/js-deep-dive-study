# 23. ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸

## 23.1 ì†ŒìŠ¤ì½”ë“œì™€ íƒ€ì…

> ğŸ’¡ ECMAScript ì‚¬ì–‘ì€ ì†ŒìŠ¤ì½”ë“œë¥¼ 4ê°€ì§€ íƒ€ì…ìœ¼ë¡œ êµ¬ë¶„, ê° ì†ŒìŠ¤ì½”ë“œëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±

**1. ì „ì—­ ì½”ë“œ**

- ìµœìƒìœ„ ìŠ¤ì½”í”„ì¸ ì „ì—­ ìŠ¤ì½”í”„ ìƒì„±
- var í‚¤ì›Œë“œë¡œ ì„ ì–¸ëœ ì „ì—­ ë³€ìˆ˜ì™€ í•¨ìˆ˜ ì„ ì–¸ë¬¸ìœ¼ë¡œ ì •ì˜ëœ ì „ì—­ í•¨ìˆ˜ë¥¼ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¡œ ë°”ì¸ë”©í•˜ê³  ì°¸ì¡°í•˜ê¸° ìœ„í•œ ì „ì—­ ê°ì²´ì™€ ì—°ê²°ã„´
- **ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±**

**2. í•¨ìˆ˜ ì½”ë“œ**

- ì§€ì—­ ìŠ¤ì½”í”„ ìƒì„±
- ì§€ì—­ ë³€ìˆ˜, ë§¤ê°œë³€ìˆ˜, arguments ê°ì²´ë¥¼ ê´€ë¦¬
- ìƒì„±í•œ ì§€ì—­ ìŠ¤ì½”í”„ë¥¼ ìŠ¤ì½”í”„ ì²´ì¸ìœ¼ë¡œ ì—°ê²°
- **í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±**

**3. eval ì½”ë“œ**

- stirct mode ì—ì„œ ìì‹ ë§Œì˜ ë…ìì ì¸ ìŠ¤ì½”í”„ ìƒì„±
- **eval ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±**

**4. ëª¨ë“ˆ ì½”ë“œ**

- ëª¨ë“ˆ ë³„ë¡œ ë…ë¦½ì ì¸ ëª¨ë“ˆ ìŠ¤ì½”í”„ ìƒì„±
- **ëª¨ë“ˆ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±**

## 23.2 ì†ŒìŠ¤ì½”ë“œì˜ í‰ê°€ì™€ ì‹¤í–‰

> ğŸ’¡ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ì†ŒìŠ¤ì½”ë“œë¥¼ 2ê°œì˜ ê³¼ì •, **ì†ŒìŠ¤ì½”ë“œì˜ í‰ê°€**ì™€ **ì†ŒìŠ¤ì½”ë“œì˜ ì‹¤í–‰ ê³¼ì •**ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬

- **ì†ŒìŠ¤ì½”ë“œì˜ í‰ê°€ ê³¼ì •**
  - ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
  - ë³€ìˆ˜, í•¨ìˆ˜ ì„ ì–¸ë¬¸ì„ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ ìƒì„±ëœ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ ì‹ë³„ìë¥¼ í‚¤ë¡œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„(ë ‰ì‹œì»¬ í™˜ê²½ì˜ í™˜ê²½ ë ˆì½”ë“œ)ì— ë“±ë¡
- **ì†ŒìŠ¤ì½”ë“œ ì‹¤í–‰ ê³¼ì • (ëŸ°íƒ€ì„)**
  - ì†ŒìŠ¤ì½”ë“œ ì‹¤í–‰ì— í•„ìš”í•œ ì •ë³´(ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ì˜ ì°¸ì¡°)ë¥¼ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„ì—ì„œ ê²€ìƒ‰í•´ì„œ ì·¨ë“

```js
var x;
x = 1;
```

- ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ìœ„ ì½”ë“œë¥¼ 2ê°œì˜ ê³¼ì •ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì²˜ë¦¬

**ì†ŒìŠ¤ì½”ë“œ í‰ê°€ ê³¼ì •**

- ë³€ìˆ˜ ì„ ì–¸ë¬¸ `var x;`ë¥¼ ë¨¼ì € ì‹¤í–‰
- ìƒì„±ëœ ë³€ìˆ˜ ì‹ë³„ì xëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„ì— ë“±ë¡ë˜ê³  undefinedë¡œ ì´ˆê¸°í™”

**ì†ŒìŠ¤ì½”ë“œ ì‹¤í–‰ ê³¼ì •**

- ì‹¤í–‰ ê³¼ì •ì—ì„œëŠ” ë³€ìˆ˜ í• ë‹¹ë¬¸ `x=1;`ë§Œ ì‹¤í–‰
- ì´ë•Œ ë³€ìˆ˜ì— ê°’ì„ í• ë‹¹í•˜ë ¤ë©´ x ë³€ìˆ˜ê°€ ì„ ì–¸ëœ ë³€ìˆ˜ì¸ì§€ í™•ì¸í•´ì•¼ í•¨
  - ì´ë¥¼ ìœ„í•´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„ì— x ë³€ìˆ˜ê°€ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

## 23.3 ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì—­í• 

> ğŸ’¡ ì†ŒìŠ¤ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ í™˜ê²½ì„ ì œê³µí•˜ê³  ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì‹¤ì œë¡œ ê´€ë¦¬í•˜ëŠ” ì˜ì—­
> â†’ ì‹ë³„ìë¥¼ ë“±ë¡í•˜ê³  ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„ì™€ ì½”ë“œ ì‹¤í–‰ ìˆœì„œ ê´€ë¦¬ë¥¼ êµ¬í˜„í•œ ë‚´ë¶€ ë§¤ì»¤ë‹ˆì¦˜

```js
// ì „ì—­ ë³€ìˆ˜ ì„ ì–¸
const x = 1;
const y = 2;

// í•¨ìˆ˜ ì •ì˜
function foo(a) {
	// ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸
	const x = 10;
	const y = 20;

	// ë©”ì„œë“œ í˜¸ì¶œ
	console.log(a + x + y); // 130
}

// í•¨ìˆ˜ í˜¸ì¶œ
foo(100);

// ë©”ì„œë“œ í˜¸ì¶œ
console.log(x + y);
```

**1. ì „ì—­ ì½”ë“œ í‰ê°€**

- ì„ ì–¸ë¬¸(ë³€ìˆ˜, í•¨ìˆ˜)ë§Œ ë¨¼ì € ì‹¤í–‰
- ìƒì„±ëœ ì „ì—­ ë³€ìˆ˜ì™€ ì „ì—­ í•¨ìˆ˜ê°€ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ì „ì—­ ìŠ¤ì½”í”„ì— ë“±ë¡
  - var í‚¤ì›Œë“œë¡œ ì„ ì—°ëœ ì „ì—­ ë³€ìˆ˜ì™€ í•¨ìˆ˜ ì„ ì–¸ë¬¸ìœ¼ë¡œ ì •ì˜ëœ í•¨ìˆ˜ëŠ” ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œê°€ ë¨

**2. ì „ì—­ ì½”ë“œ ì‹¤í–‰ = ëŸ°íƒ€ì„**

- ì „ì—­ ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
- ì „ì—­ ë³€ìˆ˜ì— ê°’ì´ í• ë‹¹ë˜ê³  í•¨ìˆ˜ê°€ í˜¸ì¶œë¨
- í•¨ìˆ˜ í˜¸ì¶œ ì‹œ â‡’ ì „ì—­ ì½”ë“œì˜ ì‹¤í–‰ ì¤‘ë‹¨ â‡’ í•¨ìˆ˜ ë‚´ë¶€ë¡œ ì§„ì…

**3. í•¨ìˆ˜ ì½”ë“œ í‰ê°€**

- ë§¤ê°œë³€ìˆ˜ì™€ ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸ë¬¸ ì‹¤í–‰ â‡’ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ì§€ì—­ ìŠ¤ì½”í”„ì— ë“±ë¡
- arguments ê°ì²´ ìƒì„± â‡’ ì§€ì—­ ìŠ¤ì½”í”„ ë“±ë¡
- this ë°”ì¸ë”© ê²°ì •

**4. í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰ = ëŸ°íƒ€ì„**

- ë§¤ê°œë³€ìˆ˜ì™€ ì§€ì—­ ë³€ìˆ˜ ê°’ í• ë‹¹
- console.log ë©”ì„œë“œë¥¼ í˜¸ì¶œ
- ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ ì‹ë³„ì ê²€ìƒ‰
- ì´ì „ ìŠ¤ì½”í”„ë¡œ ë˜ëŒì•„ê°

**ì´ì²˜ëŸ¼ ì½”ë“œê°€ ì‹¤í–‰ë˜ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ìŠ¤ì½”í”„, ì‹ë³„ì, ì½”ë“œ ì‹¤í–‰ ìˆœì„œ ë“±ì˜ ê´€ë¦¬ê°€ í•„ìš”**

- ì„ ì–¸ìœ¼ë¡œ ìƒì„±ëœ ëª¨ë“  ì‹ë³„ì(ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ ë“±)ë¥¼ ìŠ¤ì½”í”„ë¥¼ êµ¬ë¶„í•˜ì—¬ ë“±ë¡, ìƒíƒœ ë³€í™”ë¥¼ ì§€ì†ì ìœ¼ë¡œ ê´€ë¦¬
- ì¤‘ì²© ê´€ê³„ì— ì˜í•œ ìŠ¤ì½”í”„ ì²´ì¸ í˜•ì„±
- í•¨ìˆ˜ í˜¸ì¶œì— ì˜í•œ ì‹¤í–‰ ìˆœì„œ ë³€ê²½ì´ ê°€ëŠ¥í•˜ë©° ë‹¤ì‹œ ëŒì•„ê°ˆ ìˆ˜ ìˆìŒ

ğŸ‘‰ ì‹ë³„ìì™€ ìŠ¤ì½”í”„ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ **ë ‰ì‹œì»¬ í™˜ê²½**ìœ¼ë¡œ ê´€ë¦¬
ğŸ‘‰ ì½”ë“œ ì‹¤í–‰ ìˆœì„œëŠ” **`ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ`** ìœ¼ë¡œ ê´€ë¦¬

## 23.4 ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒ

> ğŸ’¡ ì½”ë“œì˜ ì‹¤í–‰ ìˆœì„œë¥¼ ê´€ë¦¬

```js
const x = 1;

function foo() {
	const y = 2;

	function bar() {
		const z = 3;
		console.log(x + y + z);
	}
	bar();
}

foo();
```

![image](https://user-images.githubusercontent.com/55246584/151688359-a13d4ea4-35f9-4685-99bc-bd82c226dc89.png)

**1. ì „ì—­ ì½”ë“œì˜ í‰ê°€ì™€ ì‹¤í–‰**

- ì „ì—­ ì½”ë“œë¥¼ í‰ê°€í•˜ì—¬ ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— push

**2. foo í•¨ìˆ˜ ì½”ë“œì˜ í‰ê°€ì™€ ì‹¤í–‰**

- ì „ì—­ í•¨ìˆ˜ fooê°€ í˜¸ì¶œë˜ë©´ ì „ì—­ ì½”ë“œì˜ ì‹¤í–‰ì€ ì¼ì‹œ ì¤‘ë‹¨
- ì½”ë“œì˜ ì œì–´ê¶Œì´ foo í•¨ìˆ˜ ë‚´ë¶€ë¡œ ì´ë™
- foo í•¨ìˆ˜ ë‚´ë¶€ì˜ ì½”ë“œë¥¼ í‰ê°€í•˜ì—¬ foo í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— push

**3. bar í•¨ìˆ˜ ì½”ë“œì˜ í‰ê°€ì™€ ì‹¤í–‰**

- ì¤‘ì²© í•¨ìˆ˜ barê°€ í˜¸ì¶œë˜ë©´ ì „ì—­ ì½”ë“œì˜ ì‹¤í–‰ì€ ì¼ì‹œ ì¤‘ë‹¨
- ì½”ë“œì˜ ì œì–´ê¶Œì´ bar í•¨ìˆ˜ ë‚´ë¶€ë¡œ ì´ë™
- bar í•¨ìˆ˜ ë‚´ë¶€ì˜ ì½”ë“œë¥¼ í‰ê°€í•˜ê³  bar í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— push

**4. foo í•¨ìˆ˜ ì½”ë“œë¡œ ë³µê·€**

- bar í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ ì½”ë“œì˜ ì œì–´ê¶Œ foo í•¨ìˆ˜ë¡œ ì´ë™
- bar í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ pop

**5. ì „ì—­ ì½”ë“œë¡œ ë³µê·€**

- foo í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ë©´ ì½”ë“œì˜ ì œì–´ê¶Œì´ ì „ì—­ ì½”ë“œë¡œ ì´ë™
- foo í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ pop
- ë” ì´ìƒ ì‹¤í–‰í•  ì „ì—­ ì½”ë“œê°€ ë‚¨ì•„ ìˆì§€ ì•Šìœ¼ë¯€ë¡œ ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë„ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì—ì„œ pop

## 23.5 ë ‰ì‹œì»¬ í™˜ê²½

> ğŸ’¡ ì‹ë³„ìì™€ ì‹ë³„ìì— ë°”ì¸ë”©ëœ ê°’, ìƒìœ„ ìŠ¤ì½”í”„ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ê¸°ë¡í•˜ëŠ” ìë£Œêµ¬ì¡°

![image](https://user-images.githubusercontent.com/55246584/151688579-1088a7e4-bcb5-42c8-a98f-8c07a2bec77d.png)

- ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ëŠ” `LexicalEnvironment`ì™€ `VariableEnvironment` ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±

![image](https://user-images.githubusercontent.com/55246584/151688601-0ae016e7-d191-4807-b633-6fc9abeace58.png)

- ë ‰ì‹œì»¬ í™˜ê²½ì€ `EnvironmentRecord`, `OuterLexicalEnvironmentReference` ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±

![image](https://user-images.githubusercontent.com/55246584/151688608-524d7549-dc71-49d2-b7a5-3af59a01af2a.png)

**í™˜ê²½ ë ˆì½”ë“œ**

- ìŠ¤ì½”í”„ì— í¬í•¨ëœ ì‹ë³„ìë¥¼ ë“±ë¡í•˜ê³  ë“±ë¡ëœ ì‹ë³„ìì— ë°”ì¸ë”©ëœ ê°’ì„ ê´€ë¦¬í•˜ëŠ” ì €ì¥ì†Œ

**ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°**

- ìƒìœ„ ìŠ¤ì½”í”„ì— ëŒ€í•œ ì°¸ì¡°
- ë‹¨ë°©í–¥ ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ì¸ ìŠ¤ì½”í”„ ì²´ì¸ì„ êµ¬í˜„

## 23.6 ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ìƒì„±ê³¼ ì‹ë³„ì ê²€ìƒ‰ ê³¼ì •

```js
var x = 1;
const y = 2;

function foo(a) {
	var x = 3;
	const y = 4;

	function bar(b) {
		const z = 5;
		console.log(a + b + x + y + z);
	}
	bar(10);
}

foo(20); // 42
```

1. ì „ì—­ ê°ì²´ ìƒì„±
2. ì „ì—­ ì½”ë“œ í‰ê°€
   1. ì „ì—­ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
   2. ì „ì—­ ë ‰ì‹œì»¬ í™˜ê²½ ìƒì„±
      1. ì „ì—­ í™˜ê²½ ë ˆì½”ë“œ ìƒì„±
         1. ê°ì²´ í™˜ê²½ ë ˆì½”ë“œ ìƒì„±
         2. ì„ ì–¸ì  í™˜ê²½ ë ˆì½”ë“œ ìƒì„±
      2. this ë°”ì¸ë”©
      3. ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡° ê²°ì •
3. ì „ì—­ ì½”ë“œ ì‹¤í–‰
4. ì‹¤í–‰

## 23.7 ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì™€ ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„

- let, const â‡’ ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„
- var â‡’ í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„

```js
let x = 1;

if (true) {
	let x = 10;
	console.log(x); // 10
}
console.log(x); // 1
```

### ì°¸ê³ 

- https://poiemaweb.com/js-execution-context
- https://publizm.github.io/posts/javascript/execution-context
